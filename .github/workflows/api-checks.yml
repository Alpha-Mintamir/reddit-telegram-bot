name: API Setup Checks

on:
  workflow_dispatch:
    inputs:
      step:
        description: "API step to validate"
        required: true
        default: "all"
        type: choice
        options:
          - telegram
          - sheets
          - reddit
          - all

jobs:
  checks:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    env:
      TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
      GOOGLE_SHEETS_SPREADSHEET_ID: ${{ secrets.GOOGLE_SHEETS_SPREADSHEET_ID }}
      GOOGLE_SERVICE_ACCOUNT_JSON: ${{ secrets.GOOGLE_SERVICE_ACCOUNT_JSON }}
      REDDIT_USER_AGENT: ${{ secrets.REDDIT_USER_AGENT }}
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: Install dependencies
        run: pip install -r requirements.txt

      - name: Run API checks
        run: python run_api_checks.py --step ${{ github.event.inputs.step }}




